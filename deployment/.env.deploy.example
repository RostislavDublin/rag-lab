# Deployment Configuration for RAG-as-a-Service
# Used by deployment scripts (setup-infrastructure.sh, deploy-cloudrun.sh)
# Copy this file to .env.deploy and fill in your actual values

# ===== GCP Infrastructure Settings =====

# GCP_PROJECT_ID - Your GCP project ID
GCP_PROJECT_ID="your-gcp-project-id"

# GCP_REGION - Deployment region (Cloud Run, Cloud SQL, GCS)
# Recommended: us-central1 (cheapest, 0$ egress within region)
GCP_REGION="us-central1"

# DEPLOYMENT_AUTH_MODE - Authentication method for deployment scripts
# - 'service_account': Uses service-account-key.json (must exist in deployment/)
# - 'gcloud': Uses gcloud CLI (run: gcloud auth application-default login)
DEPLOYMENT_AUTH_MODE="gcloud"

# ===== Infrastructure Resource Names =====
# These will be created by setup-infrastructure.sh or you can specify existing ones

GCS_BUCKET="your-project-id-rag-documents"
CLOUD_SQL_INSTANCE="rag-postgres"
SERVICE_ACCOUNT_NAME="rag-service"
SERVICE_ACCOUNT_EMAIL="rag-service@your-project-id.iam.gserviceaccount.com"
CLOUD_RUN_SERVICE="raglab"

# ===== Database Configuration =====
DB_INSTANCE_NAME="rag-postgres"
DB_NAME="rag_db"
DB_USER="rag_user"
# DB_PASSWORD - REQUIRED! Set your actual database password here
# DB_PASSWORD="your-database-password-here"

# ===== Cloud Run Configuration =====
# Resource limits and scaling settings for Cloud Run deployment
CLOUD_RUN_MEMORY="1Gi"
CLOUD_RUN_CPU="1"
CLOUD_RUN_MIN_INSTANCES="0"
CLOUD_RUN_MAX_INSTANCES="10"
CLOUD_RUN_TIMEOUT="300"
CLOUD_RUN_CONCURRENCY="80"

# ===== Secret Manager Configuration =====
# Name of the secret in Secret Manager that will store the .env file
# The .env file will be mounted as a volume at /app/.env in Cloud Run
SECRET_NAME="raglab-config"

# ===== Cloud Build & GitHub Configuration =====
# GitHub repository information for Cloud Build trigger
GITHUB_REPO_OWNER="your-github-username"
GITHUB_REPO_NAME="rag-lab"

# Cloud Build trigger settings
TRIGGER_NAME="deploy-production"
DEPLOY_BRANCH="deploy/production"

# ===== Note =====
# Application runtime configuration (embedding models, reranking, auth, etc.)
# is defined in the root .env file, which is uploaded to Secret Manager
# and mounted as a volume in Cloud Run at runtime. This approach ensures:
# - Secrets are not included in the Docker image
# - Configuration can be updated without rebuilding the container
# - The app reads from .env the same way locally and in production
